{"version":3,"sources":["aliengroup.ts"],"names":[],"mappings":"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","file":"aliengroup.js","sourcesContent":["class AlienGroup {\n\n    static direction = { right: 1, left: -1 };\n\n    aliens: Alien[];\n    aliensBottom: number[];\n    game: Game;\n\n    constructor(game: Game) {\n        this.aliens = [];\n        this.aliensBottom = [];\n        this.game = game;\n    }\n  \n    public addAlien(alien: Alien) : number {\n        this.aliens.push(alien);\n        return this.aliens.length-1;\n    }\n\n    public onRight() : number {\n        let max = -999;\n        for(let i =0; i < this.aliens.length; i++) {\n            if (this.aliens[i].getX() > max) {\n                max=this.aliens[i].getX();\n            }\n        }\n        return max;\n    }\n\n    public onLeft() : number {\n        let min = 999;\n        for(let i =0; i < this.aliens.length; i++) {\n            if (this.aliens[i].getX() < min) {\n                min=this.aliens[i].getX();\n            }\n        }\n        return min;\n    }\n\n    public onBottom() : number {\n        let min = 999;\n        for(let i =0; i < this.aliens.length; i++) {\n            if (this.aliens[i].getY() < min) {\n                min=this.aliens[i].getY();\n            }\n        }\n        return min;\n    }\n\n    public chooseFiringAlien(): number {\n        let x = this.aliensBottom[0];\n        if(this.game.world.getLevel() < 2) {\n            x = randFromArray(this.aliensBottom);\n        }\n        else {\n            for(let i=1; i < this.aliensBottom.length; i++) {\n                if(Math.abs(this.aliens[this.aliensBottom[i]].getX() - this.game.world.pad.getX()) < Math.abs(this.aliens[x].getX() - this.game.world.pad.getX())) {\n                    x = this.aliensBottom[i];\n                }\n            }\n        }\n        return x;\n    }\n\n    public init(lines: number, rows: number, level: number) {\n        let type: number;\n        for(let i = 0; i < lines; i++) {\n            for(let j = 0; j < rows; j++) {\n                if (i == 0) {\n                    type = Alien.type.bottom;\n                }\n                else if (i < 3) {\n                    type = Alien.type.middle;\n                }\n                else {\n                    type = Alien.type.top;\n                }\n\n                this.addAlien(new Alien(this.game, type, new THREE.Vector3(0.05 + (0.01*level), 0.0, 0.0), new THREE.Vector3(-5 + j*2, 20.0 - i*2, 0.0), -0.1 - (level*0.02)));\n            }\n        }\n        this.computeAliensBottom();\n    }\n\n    public computeAliensBottom() {\n        this.aliensBottom = [];\n        for(let j=0; j < this.aliens.length; j++) {\n            let add = true;\n            for(let k=j+1; k < this.aliens.length; k++) {\n                if(this.aliens[k].mesh.position.x == this.aliens[j].mesh.position.x &&\n                    this.aliens[k].mesh.position.y < this.aliens[j].mesh.position.y) {\n                    add = false;\n                    break;\n                }\n            }\n\n            if(add) {\n                this.aliensBottom.push(j);\n            }\n        }\n    }\n\n    public remove(i: number) {\n        this.aliens.splice(i, 1);\n        this.computeAliensBottom();\n    }\n\n    public getLength(): number {\n        return this.aliens.length;\n    }\n\n    public get(i: number): Alien {\n        return this.aliens[i];\n    }\n\n    public fire(AlienGroupSize: number): boolean | Missile {\n        if (AlienGroupSize>0) {\n            let firingAlien = this.chooseFiringAlien();\n            let m = this.aliens[firingAlien].fire();\n            if(m) {\n                soundAlienFire.play();\n                return m;\n            }\n            else return false;\n        }\n        \n        return false;\n    }\n\n    public animate(fall: boolean = false) {\n        if (alienGetDown<=0) {         \n            if (this.onLeft()<xMin+1.5) {\n                dir = AlienGroup.direction.right;\n                for(let i= 0; i < this.aliens.length; i++) {\n                    this.aliens[i].animate(dir);\n                }\n                if(fall == true) {\n                    alienGetDown=8;\n                }\n            }\n            if (this.onRight()>xMax-1.5) {\n                dir = AlienGroup.direction.left;\n                for(let i= 0; i < this.aliens.length; i++) {\n                    this.aliens[i].animate(dir);\n                }\n                if(fall == true) {\n                    alienGetDown=8;\n                }\n            }\n        }\n        if (alienGetDown>0) {\n            alienGetDown-=1;\n        }\n        for(let i= 0; i < this.aliens.length; i++) {\n            this.aliens[i].animate(dir);\n        }\n    }\n}"]}