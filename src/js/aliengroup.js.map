{"version":3,"sources":["aliengroup.ts"],"names":[],"mappings":"AAAA;IAQI,oBAAY,IAAU;QAClB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACrB,CAAC;IAEM,6BAAQ,GAAf,UAAgB,KAAY;QACxB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;IAEM,4BAAO,GAAd;QACI,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC;QACf,GAAG,CAAA,CAAC,IAAI,CAAC,GAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EACzC,CAAC;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,GAAG,CAAC;gBAC9B,GAAG,GAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;QAC9B,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAEM,2BAAM,GAAb;QACI,IAAI,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAA,CAAC,IAAI,CAAC,GAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EACzC,CAAC;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,GAAG,CAAC;gBAC9B,GAAG,GAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;QAC9B,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAEM,6BAAQ,GAAf;QACI,IAAI,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAA,CAAC,IAAI,CAAC,GAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EACzC,CAAC;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,GAAG,CAAC;gBAC9B,GAAG,GAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;QAC9B,CAAC;QACD,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IAEM,sCAAiB,GAAxB;QACI,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QAC7B,EAAE,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;YAClC,CAAC,GAAG,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACvC,CAAC;QACD,IAAI,CAAC,CAAC;YACJ,GAAG,CAAA,CAAC,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC/C,EAAE,CAAA,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;oBAClJ,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;gBAC3B,CAAC;YACH,CAAC;QACH,CAAC;QACD,MAAM,CAAC,CAAC,CAAC;IACb,CAAC;IAEM,yBAAI,GAAX,UAAY,KAAa,EAAE,IAAY,EAAE,KAAa;QAClD,IAAI,KAAK,CAAC;QACV,GAAG,CAAA,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAC7B,CAAC;YACC,GAAG,CAAA,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAC5B,CAAC;gBACC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;oBAAC,KAAK,GAAG,CAAC,CAAC;gBACtB,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;oBAAC,KAAK,GAAG,CAAC,CAAC;gBAC1B,IAAI;oBAAC,KAAK,GAAG,CAAC,CAAC;gBAEf,IAAI,CAAC,QAAQ,CAAC,IAAI,KAAK,CAAC;oBACpB,CAAC,EAAG,CAAC,CAAC,GAAG,CAAC,GAAC,CAAC;oBACZ,CAAC,EAAG,IAAI,GAAG,CAAC,GAAC,CAAC;oBACd,CAAC,EAAG,GAAG;oBACP,EAAE,EAAG,IAAI,GAAG,CAAC,IAAI,GAAC,KAAK,CAAC;oBACxB,IAAI,EAAG,KAAK;oBACZ,eAAe,EAAG,CAAC,GAAG,GAAG,CAAC,KAAK,GAAC,IAAI,CAAC;iBACxC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACjB,CAAC;QACH,CAAC;QACD,IAAI,CAAC,YAAY,GAAG,CAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,CAAC,CAAC;IACzC,CAAC;IAEM,2BAAM,GAAb,UAAc,CAAS;QACnB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAEzB,0CAA0C;QAC1C,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,GAAG,CAAA,CAAC,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACzC,IAAI,GAAG,GAAG,IAAI,CAAC;YACf,GAAG,CAAA,CAAC,IAAI,CAAC,GAAC,CAAC,GAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC3C,EAAE,CAAA,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oBACjE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;oBAClE,GAAG,GAAG,KAAK,CAAC;oBACZ,KAAK,CAAC;gBACR,CAAC;YACH,CAAC;YAED,EAAE,CAAA,CAAC,GAAG,CAAC,CAAC,CAAC;gBACP,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC5B,CAAC;QACH,CAAC;IACL,CAAC;IAEM,8BAAS,GAAhB;QACI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;IAC9B,CAAC;IAEM,wBAAG,GAAV,UAAW,CAAS;QAChB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IAC1B,CAAC;IAEM,yBAAI,GAAX,UAAY,cAAsB;QAC9B,EAAE,CAAC,CAAC,cAAc,GAAC,CAAC,CAAC,CAAC,CAAC;YACrB,IAAI,WAAW,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC3C,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC;YACxC,EAAE,CAAA,CAAC,CAAC,CAAC,CAAC,CAAC;gBACL,cAAc,CAAC,IAAI,EAAE,CAAC;gBACtB,MAAM,CAAC,CAAC,CAAC;YACX,CAAC;YACD,IAAI;gBAAC,MAAM,CAAC,KAAK,CAAC;QACpB,CAAC;QACD,IAAI;YAAC,MAAM,CAAC,KAAK,CAAC;IACtB,CAAC;IAEM,4BAAO,GAAd,UAAe,IAAa;QACxB,IAAI,GAAG,OAAO,IAAI,KAAK,WAAW,GAAG,IAAI,GAAG,IAAI,CAAC;QAEjD,EAAE,CAAC,CAAC,YAAY,IAAE,CAAC,CAAC,CACpB,CAAC;YACC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,GAAC,IAAI,GAAC,GAAG,CAAC,CAAA,CAAC;gBAC1B,GAAG,GAAG,CAAC,CAAC;gBACR,GAAG,CAAA,CAAC,IAAI,CAAC,GAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC1C,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBAC9B,CAAC;gBACD,EAAE,CAAA,CAAC,IAAI,IAAI,IAAI,CAAC;oBAChB,YAAY,GAAC,CAAC,CAAC;YACjB,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,GAAC,IAAI,GAAC,GAAG,CAAC,CAAA,CAAC;gBAC3B,GAAG,GAAG,CAAC,CAAC,CAAC;gBACT,GAAG,CAAA,CAAC,IAAI,CAAC,GAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC1C,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBAC9B,CAAC;gBACD,EAAE,CAAA,CAAC,IAAI,IAAI,IAAI,CAAC;oBAChB,YAAY,GAAC,CAAC,CAAC;YACjB,CAAC;QACH,CAAC;QACD,EAAE,CAAC,CAAC,YAAY,GAAC,CAAC,CAAC;YAAC,YAAY,IAAE,CAAC,CAAC;QACpC,GAAG,CAAA,CAAC,IAAI,CAAC,GAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACvC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACjC,CAAC;IACL,CAAC;IAxJM,qBAAU,GAAG,MAAM,CAAC;IAyJ/B,iBAAC;AAAD,CA3JA,AA2JC,IAAA","file":"aliengroup.js","sourcesContent":["class AlienGroup {\n\n    static FIRE_DELAY = 2000.0;\n\n    aliens: Alien[];\n    aliensBottom: number[];\n    game: Game;\n\n    constructor(game: Game) {\n        this.aliens = [];\n        this.aliensBottom = [];\n        this.game = game;\n    }\n  \n    public addAlien(alien: Alien) {\n        this.aliens.push(alien);\n    }\n\n    public onRight() {\n        var max = -999;\n        for(var i =0; i < this.aliens.length; i++)\n        {\n          if (this.aliens[i].getX() > max)\n            max=this.aliens[i].getX();\n        }\n        return max;\n    }\n\n    public onLeft() {\n        var min = 999;\n        for(var i =0; i < this.aliens.length; i++)\n        {\n          if (this.aliens[i].getX() < min)\n            min=this.aliens[i].getX();\n        }\n        return min;\n    }\n\n    public onBottom() {\n        var min = 999;\n        for(var i =0; i < this.aliens.length; i++)\n        {\n          if (this.aliens[i].getY() < min)\n            min=this.aliens[i].getY();\n        }\n        return min;\n    }\n\n    public chooseFiringAlien(): number {\n        var x = this.aliensBottom[0];\n        if(this.game.world.getLevel() < 2) {\n          x = randFromArray(this.aliensBottom);\n        }\n        else {\n          for(var i=1; i < this.aliensBottom.length; i++) {\n            if(Math.abs(this.aliens[this.aliensBottom[i]].getX() - this.game.world.pad.getX()) < Math.abs(this.aliens[x].getX() - this.game.world.pad.getX())) {\n              x = this.aliensBottom[i];\n            }\n          }\n        }\n        return x;\n    }\n\n    public init(lines: number, rows: number, level: number) {\n        var _type;\n        for(var i = 0; i < lines; i++)\n        {\n          for(var j = 0; j < rows; j++)\n          {\n            if (i == 0) _type = 1;\n            else if (i < 3) _type = 2;\n            else _type = 3;\n\n            this.addAlien(new Alien({\n                x : -5 + j*2,\n                y : 20.0 - i*2,\n                z : 0.0,\n                vx : 0.05 + (0.01*level),\n                type : _type,\n                missileVelocity : -0.1 - (level*0.02),\n            }, this.game));\n          }\n        }\n        this.aliensBottom = [24,23,22,21,20];\n    }\n\n    public remove(i: number) {\n        this.aliens.splice(i, 1);\n\n        // recherche des aliens en bas de colonnes\n        this.aliensBottom = [];\n        for(var j=0; j < this.aliens.length; j++) {\n          var add = true;\n          for(var k=j+1; k < this.aliens.length; k++) {\n            if(this.aliens[k].mesh.position.x == this.aliens[j].mesh.position.x &&\n              this.aliens[k].mesh.position.y < this.aliens[j].mesh.position.y) {\n              add = false;\n              break;\n            }\n          }\n          \n          if(add) {\n            this.aliensBottom.push(j);\n          }\n        }\n    }\n\n    public getLength(): number {\n        return this.aliens.length;\n    }\n\n    public get(i: number): Alien {\n        return this.aliens[i];\n    }\n\n    public fire(AlienGroupSize: number): boolean | Missile {\n        if (AlienGroupSize>0) {\n          let firingAlien = this.chooseFiringAlien();\n          let m = this.aliens[firingAlien].fire();\n          if(m) {\n            soundAlienFire.play();\n            return m;\n          }\n          else return false;\n        }\n        else return false;\n    }\n\n    public animate(fall: boolean) {\n        fall = typeof fall !== 'undefined' ? fall : true;\n\n        if (alienGetDown<=0)\n        {         \n          if (this.onLeft()<xMin+1.5){\n            dir = 1;\n            for(var i= 0; i < this.aliens.length; i++) {\n              this.aliens[i].animate(dir);\n            }\n            if(fall == true)\n            alienGetDown=8;\n          }\n          if (this.onRight()>xMax-1.5){\n            dir = -1;\n            for(var i= 0; i < this.aliens.length; i++) {\n              this.aliens[i].animate(dir);\n            }\n            if(fall == true)\n            alienGetDown=8;\n          }\n        }\n        if (alienGetDown>0) alienGetDown-=1;\n        for(var i= 0; i < this.aliens.length; i++) {\n             this.aliens[i].animate(dir);\n        }\n    }\n}"]}