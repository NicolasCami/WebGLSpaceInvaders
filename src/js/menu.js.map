{"version":3,"sources":["menu.ts"],"names":[],"mappings":"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","file":"menu.js","sourcesContent":["import { Game } from \"./game\";\nimport { SoundService } from \"./soundservice\";\nimport { MeshService } from \"./meshservice\";\n\nexport class Menu {\n\n    static playMaterialOver = new THREE.MeshBasicMaterial({\n        color:0x2FA1D6,\n        side:THREE.DoubleSide\n    });\n    static playMaterialNotOver = new THREE.MeshBasicMaterial({\n        color:0xFF0000,\n        side:THREE.DoubleSide\n    });\n\n    x: number;\n    y: number;\n    z: number;\n    width: number;\n    height: number;\n    play: THREE.Mesh;\n    caster: THREE.Raycaster;\n    aliens: THREE.Mesh[];\n    scores: THREE.Mesh[];\n\n    constructor(params: any) {\n        this.x = typeof params.x !== 'undefined' ? params.x : 0.0;\n        this.y = typeof params.y !== 'undefined' ? params.y : 0.0;\n        this.z = typeof params.z !== 'undefined' ? params.z : 0.0;\n        this.width = typeof params.width !== 'undefined' ? params.width : 10.0;\n        this.height = typeof params.height !== 'undefined' ? params.height : 10.0;\n        this.play = null;\n        this.caster = new THREE.Raycaster();\n        this.aliens = [];\n        this.scores = [];\n\n        this.init();\n    }\n\n    private init() {\n        SoundService.getSoundByName('menu').play();\n\n        this.play = new THREE.Mesh(new THREE.BoxGeometry(this.width/2, this.height/2, 1), Menu.playMaterialNotOver);\n        this.play.position.set(this.x, this.y+5, this.z);\n        Game.getInstance().scene.add(this.play);\n\n        var textPlay = MeshService.createTextMesh({\n          text:'PLAY !',\n          color:'rgba(255,255,255,1)',\n          font:'Bold 50px Arial',\n          width: this.width/3,\n          height: this.height/3,\n        });\n        textPlay.position.set(this.x, this.y+7, this.z-1);\n        textPlay.rotation.x = Math.PI;\n        Game.getInstance().scene.add(textPlay);\n\n        var textTitle = MeshService.createTextMesh({\n          text:'SPACE INVADERS',\n          color:'rgba(255,255,255,1)',\n          font:'Bold 35px Arial',\n          width: this.width*2,\n          height: this.height*2,\n        });\n        textTitle.position.set(this.x, this.y-10, this.z);\n        textTitle.rotation.x = Math.PI;\n        Game.getInstance().scene.add(textTitle);\n\n        let alienMenu = MeshService.getByName('menu');\n        this.aliens.push(alienMenu[0]);\n        this.aliens.push(alienMenu[1]);\n        this.aliens.push(alienMenu[2]);\n        this.aliens.push(alienMenu[3]);\n        for(var i=0; i<this.aliens.length; i++) {\n          this.aliens[i].position.set(-5 + (i*3), -9, 10.5);\n          this.aliens[i].rotation.x = Math.PI;\n          Game.getInstance().scene.add(this.aliens[i]);\n        };\n\n        this.scores.push(MeshService.createTextMesh({\n          text:'+100',\n          color:'rgba(255,255,255,1)',\n          font:'Bold 50px Arial',\n          width: 3,\n          height: 1,\n        }));\n        this.scores.push(MeshService.createTextMesh({\n          text:'+150',\n          color:'rgba(255,255,255,1)',\n          font:'Bold 50px Arial',\n          width: 3,\n          height: 1,\n        }));\n        this.scores.push(MeshService.createTextMesh({\n          text:'+200',\n          color:'rgba(255,255,255,1)',\n          font:'Bold 50px Arial',\n          width: 3,\n          height: 1,\n        }));\n        this.scores.push(MeshService.createTextMesh({\n          text:'+500',\n          color:'rgba(255,255,255,1)',\n          font:'Bold 50px Arial',\n          width: 3,\n          height: 1,\n        }));\n        for(var i=0; i<this.scores.length; i++) {\n          this.scores[i].position.set(-6 + (i*3.7), -9, 11.2);\n          this.scores[i].rotation.x = Math.PI+(Math.PI/2);\n          Game.getInstance().scene.add(this.scores[i]);\n        };\n\n        // set camera focus on menu\n        Game.getInstance().currentCamera = 0;\n        Game.getInstance().camera.rotation.x = Math.PI+Math.PI/3;\n    }\n\n    public mouseMove(event) {\n        var mouse = new THREE.Vector2();\n        mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n        mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n        this.caster.setFromCamera( mouse, Game.getInstance().camera );\n        var intersects = this.caster.intersectObject(this.play);\n            if(intersects.length > 0) {\n                this.play.material = Menu.playMaterialOver;\n          this.play.material.needsUpdate = true;\n            }\n            else {\n          this.play.material = Menu.playMaterialNotOver;\n          this.play.material.needsUpdate = true;\n        }\n    }\n\n    public mouseClick(event) {\n        var mouse = new THREE.Vector2();\n        mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n        mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n        this.caster.setFromCamera( mouse, Game.getInstance().camera );\n        var intersects = this.caster.intersectObject(this.play);\n        if(intersects.length > 0) {\n            Game.getInstance().newGame();\n        }\n    }\n}"]}