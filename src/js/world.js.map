{"version":3,"sources":["world.ts"],"names":[],"mappings":"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","file":"world.js","sourcesContent":["class World {\n\n    static bonusRate = 0.1;\n\n    missiles = [];\n    lights = [];\n    blocks: Block[];\n    explosions = [];\n    scores = [];\n    bonus = [];\n    alienBonus = [];\n    x: number;\n    y: number;\n    z: number;\n    width: number;\n    height: number;\n    limitY: number;\n    level: number;\n    onLevelInit: boolean;\n    LastFire: number;\n    lastAlienBonus: number;\n    alienBonusDelay: number;\n    invincible: boolean;\n    destructionTimer: number;\n    destructionDelay: number;\n    earthDestroyed: boolean;\n\n    caster: THREE.Raycaster;\n    earth: THREE.Mesh;\n    deathStar: THREE.Mesh;\n    place: THREE.Mesh;\n    deathBeamLoad: THREE.PointLight;\n    deathBeam: THREE.PointLight;\n    \n    alienGroup: AlienGroup;\n    pad: Pad;\n\n    constructor(params: any) {\n        this.missiles = [];\n        this.lights = [];\n        this.blocks = [];\n        this.explosions = [];\n        this.scores = [];\n        this.bonus = [];\n        this.alienBonus = [];\n        this.caster = new THREE.Raycaster();\n        this.x = typeof params.x !== 'undefined' ? params.x : 0.0;\n        this.y = typeof params.y !== 'undefined' ? params.y : 0.0;\n        this.z = typeof params.z !== 'undefined' ? params.z : 0.0;\n        this.width = typeof params.width !== 'undefined' ? params.width : 10.0;\n        this.height = typeof params.height !== 'undefined' ? params.height : 10.0;\n        this.limitY = this.height;\n        this.level = 0;\n        this.onLevelInit = false;\n        this.alienGroup = new AlienGroup();\n        this.LastFire = 0;\n        this.lastAlienBonus = 0;\n        this.alienBonusDelay = 2000;\n        this.invincible = false;\n        this.earth = new THREE.Mesh(\n            new THREE.SphereGeometry(30,30,30),\n            new THREE.MeshLambertMaterial({\n                map: THREE.ImageUtils.loadTexture('src/medias/images/earth.jpg')\n            })\n        );\n        this.deathStar = new THREE.Mesh(\n            new THREE.SphereGeometry(25,30,30),\n            new THREE.MeshLambertMaterial({\n                map: THREE.ImageUtils.loadTexture('src/medias/images/deathStar.jpg')\n            })\n        );\n        this.place = new THREE.Mesh(new THREE.SphereGeometry(30,30,30));\n        this.destructionTimer = Date.now();\n        this.destructionDelay = 40000;\n        this.earthDestroyed = false;\n\n        this.init();\n    }\n\n    private init() {\n        this.destructionTimer = Date.now();\n\n        this.place.position.set(this.x, this.y-200, this.z+0.1);\n        let squareMaterial = new THREE.MeshPhongMaterial({\n          color:0xFFFFFF,\n          side:THREE.DoubleSide,\n          opacity:0.5,\n          specular: 0xffffff,\n          shininess: 200,\n          transparent:true,\n        });\n\n        let ground = new THREE.Mesh(new THREE.BoxGeometry(this.width, this.height, 0.1), groundMaterial);\n        ground.position.set(this.x, this.y+2, this.z);\n        ground.receiveShadow = true;\n        Game.getInstance().scene.add(ground);\n\n        let sphere = new THREE.SphereGeometry( 0.2, 16, 8 );\n\n        // plots de signalisation : limite alien\n        for(let i=0; i<8; i++) {\n          let tmp = worldData.limit.clone();\n          tmp.position.set(this.x-(this.width/2)+0.5 + i*2.7, this.y-2, this.z+0.2);\n          Game.getInstance().scene.add(tmp);\n        }\n\n        missileLight1.position.copy(this.place.position);\n        missileLight2.position.copy(this.place.position);\n        missileLight3.position.copy(this.place.position);\n        missileLight4.position.copy(this.place.position);\n        this.lights.push(missileLight1);\n        this.lights.push(missileLight2);\n        this.lights.push(missileLight3);\n        this.lights.push(missileLight4);\n\n        this.deathBeamLoad = new THREE.PointLight( 0x00ff00, 2, 20 );\n        this.deathBeamLoad.add( new THREE.Mesh( sphere, new THREE.MeshBasicMaterial( { color: 0x00ff00 } ) ) );\n        this.deathBeamLoad.position.set(114, 255, -80);\n        Game.getInstance().scene.add( this.deathBeamLoad );\n        this.deathBeam = new THREE.PointLight( 0x00ff00, 2, 20 );\n        this.deathBeam.add( new THREE.Mesh(new THREE.PlaneGeometry( 1, 5, 5 ), new THREE.MeshBasicMaterial( { color: 0x00ff00 } )) );\n        this.deathBeam.position.set(114, 255, -80);\n        Game.getInstance().scene.add( this.deathBeam );\n\n        this.earth.position.set(-140, 255, -80);\n        this.deathStar.position.set(140, 255, -80);\n        this.deathStar.rotation.x -= 49;\n        this.earth.rotation.x += 1.2;\n\n        Game.getInstance().scene.add(this.earth);\n        Game.getInstance().scene.add(this.deathStar);\n\n        this.pad = new Pad({ min: this.x-this.width/2.0, max: this.x+this.width/2.0 });\n        Game.getInstance().scene.add(this.pad.mesh);\n    }\n\n    public addBlock(block: Block) {\n        this.blocks.push(block);\n    }\n\n    public addAlienBonus() {\n        let a = new AlienBonus();\n        this.alienBonus.push(a);\n    }\n\n    public randomAlienBonus() {\n        if(this.alienBonus.length == 0) {\n          if(Date.now()-this.lastAlienBonus > this.alienBonusDelay) {\n            this.addAlienBonus();\n            this.lastAlienBonus = Date.now();\n          }\n        }\n    }\n\n    public buildBunker(x: number,y: number) {\n        let size = 0.6;\n        for(let i=0; i<4; i++) {\n          for(let j=0; j<(3-this.level); j++) {\n            let b = new Block(Game.getInstance(), new THREE.Vector3(x+(size-0.01)*i, y+(size-0.01)*j, Math.random()*6.0));\n            this.addBlock(b);\n          }\n        }\n    }\n\n    public initLevel(level: number) {\n        this.level = level;\n        this.onLevelInit = true;\n        this.pad.mesh.visible = true;\n        this.pad.animateResetInit();\n        this.clear();\n\n        switch(this.level) {\n          \n          case 0:\n            this.alienGroup.init(5,5,level);\n            for(let i= 0; i < this.alienGroup.getLength(); i++) {\n              this.alienGroup.get(i).mesh.position.z = Math.random()*6.0;\n              Game.getInstance().scene.add(this.alienGroup.get(i).mesh);\n              Game.getInstance().scene.add(this.alienGroup.get(i).mesh2);\n            }\n\n            this.initBunkers();\n            break;\n            \n          default:\n            this.alienGroup.init(5,5,level);\n            for(let i= 0; i < this.alienGroup.getLength(); i++) {\n              this.alienGroup.get(i).mesh.position.z = Math.random()*6.0;\n              Game.getInstance().scene.add(this.alienGroup.get(i).mesh);\n              Game.getInstance().scene.add(this.alienGroup.get(i).mesh2);\n            }\n\n            this.initBunkers();\n            break;\n        }\n\n        return this.level;\n    }\n\n    public nextLevel() {\n        return this.initLevel(this.level+1);\n    }\n\n    public initBunkers() {\n        this.buildBunker(-7.0, 1.7);\n        this.buildBunker(-3.0, 1.7);\n        this.buildBunker(1.0, 1.7);\n        this.buildBunker(5.0, 1.7);\n    }\n\n    public clear() {\n        for(let j= 0; j < this.blocks.length; j++) {\n          Game.getInstance().scene.remove(this.blocks[j].mesh);\n        }\n        this.blocks = [];\n\n        for(let j= 0; j < this.alienGroup.aliens.length; j++) {\n          Game.getInstance().scene.remove(this.alienGroup.aliens[j].mesh);\n          Game.getInstance().scene.remove(this.alienGroup.aliens[j].mesh2);\n        }\n        this.alienGroup.aliens = [];\n\n        for(let j= 0; j < this.alienBonus.length; j++) {\n          Game.getInstance().scene.remove(this.alienBonus[j].mesh);\n          Game.getInstance().scene.remove(this.alienBonus[j].mesh2);\n        }\n        this.alienBonus = [];\n\n        for(let j= 0; j < this.bonus.length; j++) {\n          Game.getInstance().scene.remove(this.bonus[j].mesh);\n        }\n        this.bonus = [];\n\n        for(let j= 0; j < this.missiles.length; j++) {\n          Game.getInstance().scene.remove(this.missiles[j].mesh);\n        }\n        this.missiles = [];\n\n        for(let j= 0; j < this.explosions.length; j++) {\n          Game.getInstance().scene.remove(this.explosions[j].mesh);\n        }\n        this.explosions = [];\n\n        for(let j= 0; j < this.scores.length; j++) {\n          Game.getInstance().scene.remove(this.scores[j].mesh);\n        }\n        this.scores = [];\n\n        this.lastAlienBonus = Date.now();\n        this.pad.resetPosition();\n    }\n\n    public killThemAll() {\n        for(let j= 0; j < this.alienGroup.getLength(); j++) {\n          soundAlienExplosion.play();\n          let e = new Explosion(1.5, 50, 0.4, 0xff0000, this.alienGroup.get(j).mesh.position.clone());\n          this.explosions.push(e);\n          Game.getInstance().scene.remove(this.alienGroup.get(j).mesh);\n          Game.getInstance().scene.remove(this.alienGroup.get(j).mesh2);\n        }\n        this.alienGroup.aliens = [];\n    }\n\n    public invinciblePad() {\n        if(this.invincible == false)\n          this.invincible = true;\n        else\n          this.invincible = false;\n    }\n\n    public killPad() {\n        let e = new Explosion(1.5, 100, 0.5, 0x2FA1D6, this.pad.mesh.position.clone());\n        this.explosions.push(e);\n    }\n\n    public padFire() {\n        let m = this.pad.fire();\n        if(m instanceof Missile) {\n          this.missiles.push(m);\n        }    \n    }\n\n    public alienFire() {\n        let m = this.alienGroup.fire();\n        if(m instanceof Missile) {\n            this.missiles.push(m);\n            Game.getInstance().scene.add(m.mesh);\n            this.updateMissileLights();\n        }\n    }\n\n    public removeMissile(i: number) {\n        Game.getInstance().scene.remove(this.missiles[i].mesh);\n        this.missiles.splice(i, 1);\n        this.updateMissileLights();\n    }\n\n    public removeAlien(i: number) {\n        Game.getInstance().scene.remove(this.alienGroup.get(i).mesh);\n        Game.getInstance().scene.remove(this.alienGroup.get(i).mesh2);\n        this.alienGroup.remove(i);\n    }\n\n    private updateMissileLights() {\n        // empty\n    }\n\n    public animate() {\n        let e: Explosion;\n        if (this.earthDestroyed == false)\n        {\n          if (Date.now() - this.destructionTimer < this.destructionDelay-4225) {\n            this.deathBeamLoad.scale.setX (this.deathBeamLoad.scale.x + 0.01);\n            this.deathBeamLoad.scale.setY (this.deathBeamLoad.scale.y + 0.01);\n            this.deathBeamLoad.scale.setZ (this.deathBeamLoad.scale.z + 0.01);\n          }\n          else {\n            this.deathBeamLoad.scale.setX (this.deathBeamLoad.scale.x - 0.05);\n            this.deathBeamLoad.scale.setY (this.deathBeamLoad.scale.y - 0.05);\n            this.deathBeamLoad.scale.setZ (this.deathBeamLoad.scale.z - 0.05);\n            this.deathBeam.scale.setX (this.deathBeam.scale.x + 1);\n            this.deathBeam.position.x-= 0.4;\n          }\n          \n          if (Date.now() - this.destructionTimer > this.destructionDelay)\n          {\n            console.log(\"DESTROY EARTH\");\n            this.earth.visible= false;\n            this.earthDestroyed = true;\n            this.deathBeamLoad.visible = false;\n            let e = new Explosion(100, 200, 10, 0x354696, this.earth.position.clone());\n            this.explosions.push(e);\n          }\n        }else{\n          if (Date.now() - this.destructionTimer < this.destructionDelay+4225)\n          {this.deathBeam.scale.setX (this.deathBeam.scale.x - 1);\n          this.deathBeam.position.x-= 0.5;}\n          else this.deathBeam.visible = false;\n        }\n        this.earth.rotation.y += 0.001;\n\n        if(this.onLevelInit) {\n          let levelInitEnd = true;\n          levelInitEnd = this.pad.animateReset();\n          for(let j= 0; j < this.alienGroup.getLength(); j++) {\n            if(this.alienGroup.get(j).mesh.position.z > 0) {\n              this.alienGroup.get(j).mesh.position.z -= 0.05;\n              levelInitEnd = false;\n            }\n            else {\n              this.alienGroup.get(j).mesh.position.z = 0.0;\n            }\n          }\n          for(let j= 0; j < this.blocks.length; j++) {\n            if(this.blocks[j].mesh.position.z > 0) {\n              this.blocks[j].mesh.position.z -= 0.05;\n              levelInitEnd = false;\n            }\n            else {\n              this.blocks[j].mesh.position.z = 0.0;\n            }\n          }\n          if(levelInitEnd) {\n            this.onLevelInit = false;\n          }\n        }\n        else {\n          let missilePadTouch = false;\n          \n          // animate pad\n          if(Key.getInstance().isDown(Key.keyCode.left)) {\n            this.pad.left();\n            Game.getInstance().updateCameraPad();\n          }\n          if(Key.getInstance().isDown(Key.keyCode.right)) {\n            this.pad.right();\n            Game.getInstance().updateCameraPad();\n          }\n          if(Key.getInstance().isDown(Key.keyCode.space)) this.padFire();\n          \n          // animate pad\n          this.pad.animate();\n          \n          // animate bunkers\n          for(let i= 0; i < this.blocks.length; i++) {\n             this.blocks[i].animate();\n          }\n          \n          // animate aliens\n          if(this.invincible == true) {\n            this.alienGroup.animate(false);\n          }\n          else {\n            this.alienGroup.animate(true);\n          }\n          \n          // alien fire\n          if((Date.now() - this.LastFire) > 1000){    \n            this.alienFire();\n            this.LastFire = Date.now();\n          }\n          \n          // alien bonus\n          for(let i= 0; i < this.alienBonus.length; i++) {\n             if(this.alienBonus[i].animate() == false) {\n              Game.getInstance().scene.remove(this.alienBonus[i].mesh);\n              Game.getInstance().scene.remove(this.alienBonus[i].mesh2);\n              this.alienBonus.splice(i, 1);\n             }\n          }\n          \n          // animate missiles\n          for(let i=0; i < this.missiles.length; i++) {\n             this.missiles[i].animate();\n          }\n          \n          // check missile overflow\n          for(let i= 0; i < this.missiles.length; i++) {\n             if(this.missiles[i].mesh.position.y > this.limitY || this.missiles[i].mesh.position.y < -3.0) {\n              // kill missile\n              Game.getInstance().scene.remove(this.missiles[i].mesh);\n              this.missiles.splice(i, 1);\n              i--;\n             }\n          }\n          \n          // animate explosions\n          for(let i= 0; i < this.explosions.length; i++) {\n             if(this.explosions[i].animate()) {\n              // explosion end\n              Game.getInstance().scene.remove(this.explosions[i].mesh);\n              this.explosions.splice(i, 1);\n              i--;\n              break;\n             }\n          }\n          \n          // animate scores\n          for(let i= 0; i < this.scores.length; i++) {\n             if(this.scores[i].animate()) {\n              // score end\n              Game.getInstance().scene.remove(this.scores[i].mesh);\n              this.scores.splice(i, 1);\n              i--;\n              break;\n             }\n          }\n          \n          // animate bonus\n          for(let i= 0; i < this.bonus.length; i++) {\n             if(this.bonus[i].animate()) {\n              // bonus end\n              Game.getInstance().scene.remove(this.bonus[i].mesh);\n              this.bonus.splice(i, 1);\n              i--;\n              break;\n             }\n          }\n          \n          // check missile collision with aliens\n          for(let i= 0; i < this.missiles.length; i++) {\n            for(let j= 0; j < this.alienGroup.getLength(); j++) {\n              if(!this.missiles[i].alien && boxCollision(this.alienGroup.get(j),this.missiles[i])) {\n                missilePadTouch = true;\n                let alien = this.alienGroup.get(j);\n                //console.log('missile collision avec alien');\n                // explosion\n                soundAlienExplosion.play();\n                e = new Explosion(1.5, 50, 0.4, alien.explosionColor, alien.mesh.position.clone());\n                this.explosions.push(e);\n                // score\n                Game.getInstance().updateScore(alien.getScore());\n                let s = new ScoreAnimation({\n                  x : alien.mesh.position.x,\n                  y : alien.mesh.position.y,\n                  z : alien.mesh.position.z,\n                  text : '+' + alien.getScore(),\n                });\n                this.scores.push(s);\n                // bonus\n                if(Math.random() < World.bonusRate) {\n                  let b = new Bonus(Math.floor((Math.random()*2)+1), new THREE.Vector3(alien.mesh.position.x, alien.mesh.position.y, alien.mesh.position.z));\n                  this.bonus.push(b);\n                }\n                // kill alien\n                this.removeAlien(j);\n                // kill missile\n                if(!this.missiles[i].isInvincible()) {\n                  this.removeMissile(i);\n                  i--;\n                  break;\n                }\n              }\n            }\n          }\n          for(let i= 0; i < this.missiles.length; i++) {\n            for(let j= 0; j < this.alienBonus.length; j++) {\n              if(!this.missiles[i].alien && boxCollision(this.alienBonus[j],this.missiles[i])) {\n                missilePadTouch = true;\n                let alien = this.alienBonus[j];\n                // explosion\n                soundAlienExplosion.play();\n                e = new Explosion(1.5, 50, 0.4, 0xff0000, alien.mesh.position.clone());\n                this.explosions.push(e);\n                // score\n                Game.getInstance().updateScore(alien.getScore());\n                let s = new ScoreAnimation({\n                  x : alien.mesh.position.x,\n                  y : alien.mesh.position.y,\n                  z : alien.mesh.position.z,\n                  text : '+' + alien.getScore(),\n                });\n                this.scores.push(s);\n                // kill alien\n                Game.getInstance().scene.remove(alien.mesh);\n                Game.getInstance().scene.remove(alien.mesh2);\n                this.alienBonus.splice(j, 1);\n                // kill missile\n                if(!this.missiles[i].isInvincible()) {\n                  this.removeMissile(i);\n                  i--;\n                  break;\n                }\n              }\n            }\n          }\n          \n          // check collision of alien's missile with pad\n          if(this.invincible == false) {\n            for(let i= 0; i < this.missiles.length; i++) {\n              if(boxCollision(this.missiles[i],this.pad)) {\n                soundPadExplosion.play();\n                Game.getInstance().updateLife(Game.getInstance().life-1);\n                this.removeMissile(i);\n                this.killPad();\n                i--;\n                if(Game.getInstance().life <= 0) {\n                  this.pad.mesh.visible = false;\n                  setTimeout(function () {\n                    Game.getInstance().lose();\n                  }.bind(this), 500);\n                }\n              }\n            }\n          }\n          \n          // check if aliens have reach the player\n          if(this.alienGroup.onBottom() < 4.5) {\n            Game.getInstance().lose();\n          }\n\n          // check block collision\n          for(let i= 0; i < this.missiles.length; i++) {\n            for(let j= 0; j < this.blocks.length; j++) {\n              if(boxCollision(this.blocks[j],this.missiles[i])) {\n                if(!this.missiles[i].alien) {\n                  missilePadTouch = true;\n                }\n                // explosion\n                soundBlockExplosion.play();\n                e = new Explosion(1.5, 30, 0.2, 0x22dd33, this.blocks[j].mesh.position.clone());\n                this.explosions.push(e);\n                // kill block\n                Game.getInstance().scene.remove(this.blocks[j].mesh);\n                this.blocks.splice(j, 1);\n                // kill missile\n                if(!this.missiles[i].isInvincible()) {\n                  this.removeMissile(i);\n                  i--;\n                  break;\n                }\n              }\n            }\n          }\n          \n          // check bonus collision\n          for(let i= 0; i < this.bonus.length; i++) {\n            if(boxCollision(this.bonus[i],this.pad)) {\n              soundBonus.play();\n              // give bonus to pad\n              this.pad.addBonus(this.bonus[i]);\n              // explosion\n              e = new Explosion(1.5, 30, 0.2, 0x22dd33, this.pad.mesh.position.clone());\n              this.explosions.push(e);\n              // kill bonus\n              Game.getInstance().scene.remove(this.bonus[i].mesh);\n              this.bonus.splice(i, 1);\n            }\n          }\n          \n          // reset fire delay if a missile touch\n          if(missilePadTouch) {\n            this.pad.resetFireDelay();\n          }\n        }\n    }\n\n    public getLevel() {\n        return this.level;\n    }\n\n    public getAliensLengh() {\n        return this.alienGroup.getLength();\n    }\n}"]}