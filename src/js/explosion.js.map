{"version":3,"sources":["explosion.ts"],"names":[],"mappings":"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","file":"explosion.js","sourcesContent":["class Explosion {\n\n    static LIFE_TIME = 1000.0;\n\n    particleNb: number;\n    particleSize: number;\n    particleColor: number;\n    particles: THREE.Geometry;\n    time: number;\n    mesh: THREE.PointCloud;\n    size: any;\n    game: Game;\n\n    constructor(params: any, game: Game) {\n        this.time = Date.now();\n        \n        if(typeof params.mesh !== 'undefined') {\n            this.mesh = params.mesh.clone();\n        }\n        else {\n            this.size = typeof params.size !== 'undefined' ? params.size : 1.0;\n            this.particleNb = typeof params.particleNb !== 'undefined' ? params.particleNb : 10;\n            this.particleSize = typeof params.particleSize !== 'undefined' ? params.particleSize : 0.1;\n            this.particleColor = typeof params.particleColor !== 'undefined' ? params.particleColor : 0xff0000;\n            this.particles = new THREE.Geometry;\n            for (var p = 0; p < this.particleNb; p++) {\n                var particle = new THREE.Vector3(Math.random() * this.size - (this.size/2.0), Math.random() * this.size - (this.size/2.0), Math.random() * this.size - (this.size/2.0));\n                particle.velocity = new THREE.Vector3(Math.random()*1-0.5, Math.random()*1-0.5, Math.random()*1-0.5);\n                this.particles.vertices.push(particle);\n            }\n            var particleMaterial = new THREE.PointCloudMaterial({ color: this.particleColor, size: this.particleSize });\n            this.mesh = new THREE.PointCloud(this.particles, particleMaterial);\n        }\n        \n        this.mesh.position.x = typeof params.x !== 'undefined' ? params.x : 0.0;\n        this.mesh.position.y = typeof params.y !== 'undefined' ? params.y : 0.0;\n        this.mesh.position.z = typeof params.z !== 'undefined' ? params.z : 0.0;\n\n        this.game = game;\n        this.game.scene.add(this.mesh);\n    }\n\n    public animate = function() {\n        for(var i= 0; i < this.mesh.geometry.vertices.length; i++) {\n            var particle = this.mesh.geometry.vertices[i];\n            particle.add(particle.velocity);\n        }\n        this.mesh.geometry.verticesNeedUpdate = true;\n        \n        if(this.time + Explosion.LIFE_TIME < Date.now()) {\n            return true;\n        }\n        return false;\n    };\n}\n"]}